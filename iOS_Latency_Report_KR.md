# iOS 재생 지연 및 싱크 불일치 기술 분석 및 해결 보고서

## 개요
iOS 기기에서 발생하는 재생 지연(Startup Latency)과 실시간 싱크 이탈 현상을 해결하기 위해 **'리얼 엔지니어링'** 방식의 보정 로직을 적용했습니다.

---

## 적용된 해결 책

### 1. iOS 전용 초기 지연 자동 보정 (Startup Bias)
*   **원인**: iOS Safari는 영상 재생 시작 시 엔진 내부적으로 약 0.4초 이상의 버퍼링 지연을 강제합니다.
*   **해결**: 기기가 iOS임이 감지되면 재생 시작 시점에 `IOS_STARTUP_BIAS`(-0.45초)를 자동으로 적용하여, 다른 기기들보다 0.45초 앞선 시점을 재생하도록 보정했습니다.
    *   `js/app.js` 상단의 `IOS_STARTUP_BIAS` 변수를 통해 숫자를 직접 조정하며 테스트하실 수 있습니다.

### 2. 성능 최적화된 실시간 싱크 보정 (Safe Sync Check)
*   **원인**: 실시간 보정이 너무 잦으면 iOS의 무거운 탐색(Seek) 기능 때문에 화면과 소리가 뚝뚝 끊기는 '렉'이 발생합니다.
*   **해결**: 누락되었던 `checkVideoSync` 함수를 복구하되, 실행 간격을 **2초**로 대폭 늘리고, 오차가 **0.3초 이상** 벌어질 때만 보정을 수행하도록 설계하여 부드러운 재생과 싱크 유지를 동시에 잡았습니다.

### 3. 끊김 없는 미세 조정 (Smooth Nudge)
*   **원인**: 사용자가 싱크 버튼(+/-)을 누를 때마다 즉시 영상 위치를 바꾸면 UI가 얼어붙는 현상이 발생합니다.
*   **해결**: 버튼을 누르면 **내부 시계(Logic Clock)**를 즉시 업데이트하여 즉각적인 반응을 주고, 실제 영상 위치 이동(Seek)은 사용자가 입력을 멈춘 후 잠시 뒤(Debounce)에 수행하여 연속 클릭 시에도 쾌적한 조작이 가능하게 했습니다.

---

## 테스트 가이드

1.  **초기 싱크 테스트**: iOS 기기에서 재생 버튼을 눌렀을 때, 이전보다 다른 기기와 소리가 훨씬 더 잘 맞는 것을 확인하세요.
2.  **미세 조정 테스트**: `AUTO SYNC` 메뉴 내의 수동 버튼으로 싱크를 조절할 때, 영상이 멈추지 않고 부드럽게 시계값이 변하는지 확인하세요.
3.  **장시간 유지 테스트**: 노래 한 곡이 끝날 때까지 소리가 크게 어긋나지 않는지 확인하세요. (2초마다 자동 보정 작동)

---

## 기술적 결론
iOS의 하드웨어/브라우저 제약을 인정하고, 이를 우회하기 위한 **시간차 공격(Startup Bias)**과 **성능 배분(Safe Sync Interval)**을 통해 구형 프로젝트 수준의 사용자 경험을 구현했습니다.
